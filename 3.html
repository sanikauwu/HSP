<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Part3: è‹¦æ‰‹ãªå ´é¢ã®æ•´ç†</title>
  <style>
    body {
      font-family: "Arial", sans-serif;
      background-color: #FBF1F0;
      color: #5C4545;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    h2 {
      text-align: center;
      color: #FA7DAD;
      margin: 20px;
    }

    .container {
      flex: 1;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      padding: 20px;
      height: 70vh;
    }

    /* å·¦å´ãƒ¡ãƒ¢ */
    .notes {
      width: 30%;
      padding: 10px;
      overflow-y: auto;
    }

    .note {
      background: #fff9c4;
      border: 1px solid #e0c97f;
      border-radius: 8px;
      padding: 10px;
      margin: 10px 0;
      cursor: grab;
      text-align: center;
      box-shadow: 2px 2px 6px rgba(0,0,0,0.1);
      position: relative;
    }

    .note:active {
      cursor: grabbing;
    }

    .custom-note input {
      width: 90%;
      border: none;
      outline: none;
      background: transparent;
      text-align: center;
      font-size: 14px;
      color: #5C4545;
    }

    /* å³å´è»¸ */
    .axis-area {
      width: 65%;
      position: relative;
      border: 2px solid #FA7DAD;
      border-radius: 12px;
      background: #fff;
      overflow: hidden;
    }

    .axis-line-x, .axis-line-y {
      position: absolute;
      background: #FA7DAD;
    }
    .axis-line-x {
      top: 50%;
      left: 0;
      height: 2px;
      width: 100%;
    }
    .axis-line-y {
      left: 50%;
      top: 0;
      width: 2px;
      height: 100%;
    }

    .axis-label {
      position: absolute;
      font-size: 16px;
      font-weight: bold;
      color: #FA7DAD;
      background: #FBF1F0;
      padding: 2px 6px;
      border-radius: 6px;
    }
    .label-top { top: 5px; left: 50%; transform: translateX(-50%); }
    .label-bottom { bottom: 5px; left: 50%; transform: translateX(-50%); }
    .label-left { left: 5px; top: 50%; transform: translateY(-50%); }
    .label-right { right: 5px; top: 50%; transform: translateY(-50%); }

    /* å®Œæˆãƒœã‚¿ãƒ³ */
    .finish-btn {
      margin: 20px auto;
      background: #FA7DAD;
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 16px;
      border-radius: 24px;
      cursor: pointer;
      transition: 0.3s;
      display: block;
    }
    .finish-btn:hover {
      background: #f95d9f;
    }

    /* overlay */
    .overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(251, 241, 240, 0.95);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.6s ease;
      z-index: 10;
    }
    .overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .overlay-content {
      background: #fff;
      padding: 30px;
      border-radius: 16px;
      max-width: 800px;
      text-align: left;
      box-shadow: 0px 4px 10px rgba(0,0,0,0.15);
      line-height: 1.7;
      color: #5C4545;
    }

    .overlay-content h3 {
      color: #FA7DAD;
      margin-bottom: 15px;
      text-align: center;
    }

    .overlay-content p {
      margin-bottom: 12px;
    }

    .next-btn {
      margin-top: 20px;
      background: #FA7DAD;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 14px;
      border-radius: 20px;
      cursor: pointer;
      transition: 0.3s;
      display: block;
    }
    .next-btn:hover {
      background: #f95d9f;
    }

    @media (max-width: 768px) {
      .container {
        flex-direction: column;
        align-items: center;
        height: auto;
      }
      .notes, .axis-area {
        width: 100%;
        margin-bottom: 15px;
      }
      .axis-area {
        height: 60vh;
      }
      .overlay-content { max-width: 92%; padding: 18px; }
    }
  </style>
</head>
<body>
  <h2>ğŸŒ¸ è‹¦æ‰‹ãªå ´é¢ã‚’æ•´ç†ã—ã¦ã¿ã‚ˆã† ğŸŒ¸</h2>

  <div class="container">
    <!-- å·¦ãƒ¡ãƒ¢ -->
    <div class="notes" id="notes">
      <div class="note" draggable="true">1. å¤§å‹¢ã®å‰ã§ç™ºè¡¨ã™ã‚‹</div>
      <div class="note" draggable="true">2. è¦‹ã‚‰ã‚Œã¦ã„ã‚‹çŠ¶æ³ã§ä½œæ¥­ã™ã‚‹</div>
      <div class="note" draggable="true">3. çŸ¥ã‚‰ãªã„äººã¨é•·æ™‚é–“ä¸€ç·’ã«ã„ã‚‹</div>
      <div class="note" draggable="true">4. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¿”ã£ã¦ã“ãªã„</div>
      <div class="note" draggable="true">5. é¨’éŸ³ã®ä¸­ã§ä¼‘ã‚€</div>
      <div class="note" draggable="true">6. åˆºæ¿€çš„ãªæ˜ åƒã‚’è¦‹ã‚‹</div>
      <!-- æ°¸é ã«å­˜åœ¨ã™ã‚‹å…¥åŠ›ä¾¿ç®‹ -->
      <div class="note custom-note" draggable="true">
        <input type="text" placeholder="â• ã‚ãªãŸè‡ªèº«ã®å ´é¢ã‚’è¿½åŠ " />
      </div>
    </div>

    <!-- å³åæ¨™ -->
    <div class="axis-area" id="axis-area">
      <div class="axis-line-x"></div>
      <div class="axis-line-y"></div>
      <div class="axis-label label-top">å¿ƒç†</div>
      <div class="axis-label label-bottom">ç”Ÿç†</div>
      <div class="axis-label label-left">å†…å› </div>
      <div class="axis-label label-right">å¤–å› </div>
    </div>
  </div>

  <!-- å®Œæˆãƒœã‚¿ãƒ³ -->
  <button class="finish-btn" id="finishBtn">å®Œæˆ âœ¨</button>

  <!-- è¿™é‡Œä¸ºç§‘æ™®å¼¹çª—ï¼ˆå·²å°† 4.html çš„ç§‘æ™®å†…å®¹æ¬åˆ°è¿™é‡Œï¼‰ -->
  <div class="overlay" id="overlay">
    <div class="overlay-content">
      <h3>ğŸŒ± é«˜æ„Ÿå—æ€§ç—‡çŠ¶ã¯ãªãœç”Ÿã˜ã‚‹ã®ã‹ï¼Ÿ</h3>

      <p><strong>ç”Ÿç†çš„è¦å› ãŒä¸€éƒ¨ã®äººã‚’æ•æ„Ÿã«ã™ã‚‹</strong><br>
      ç¾åœ¨ã®ä¸–ç•Œã«ãŠã‘ã‚‹ã€Œæ•æ„Ÿã•ã€ã«é–¢ã™ã‚‹ç ”ç©¶ã§ã¯ã€ãã‚Œã¯ç”Ÿã¾ã‚Œã¤ãã®äººæ ¼ç‰¹æ€§ã§ã‚ã‚Šã€ä¸»ã«ç”Ÿç†çš„è¦å› ã«ã‚ˆã£ã¦å½¢æˆã•ã‚Œã‚‹ã“ã¨ãŒåˆ†ã‹ã£ã¦ã„ã¾ã™ã€‚</p>

      <p><strong>éºä¼å­ãŒäººã®æ•æ„Ÿã•ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹</strong><br>
      ã€Œé«˜åº¦ã«æ•æ„Ÿãªäººã€…ã€ã«é–¢ã™ã‚‹æ•°ç™¾ã®ç ”ç©¶ã§ã€éºä¼å­ãŒé‡è¦ãªè¦å› ã§ã‚ã‚‹ã“ã¨ãŒç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚ç ”ç©¶è€…ãŸã¡ã¯ã€ã‚»ãƒ­ãƒˆãƒ‹ãƒ³ãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ã‚¿ãƒ¼éºä¼å­ï¼ˆ5-HTTï¼‰ãŒã€æ•æ„Ÿã•ã‚„æ„Ÿæƒ…ã®å¥åº·ã«å¤§ããªå½±éŸ¿ã‚’ä¸ãˆã‚‹ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚ã“ã®ç¥çµŒä¼é”ç‰©è³ªã¯ã€äººé–“ã ã‘ã§ãªãã€é­šã€é³¥ã€çŒ«ã€çŠ¬ã€éœŠé•·é¡ãªã©100ç¨®é¡ä»¥ä¸Šã®å‹•ç‰©ã®æ•æ„Ÿã•ã«ã‚‚å½±éŸ¿ã—ã¾ã™ã€‚è‡ªç„¶ç•Œã§ã¯ã€é«˜åº¦ã«æ•æ„Ÿã§ã‚ã‚‹ã“ã¨ã¯ç’°å¢ƒã®å±é™ºã‚’å¯ŸçŸ¥ã™ã‚‹èƒ½åŠ›ã‚’é«˜ã‚ã€ç”Ÿå­˜ã®å¯èƒ½æ€§ã‚’ä¸Šã’ã‚‹æŠ€è¡“ã§ã™ã€‚ãã®ãŸã‚ã€æ•æ„Ÿã•ã¯éºä¼å­ã«åŸºã¥ãè‡ªå·±é˜²è¡›æœ¬èƒ½ã¨ã‚‚è€ƒãˆã‚‰ã‚Œã¦ã„ã¾ã™ã€‚</p>

      <p><strong>è„³ã®ä¸€éƒ¨ã®æ´»å‹•ãŒæ•æ„Ÿã•ã¨é–¢ä¿‚ã™ã‚‹</strong><br>
      ã‚«ãƒªãƒ•ã‚©ãƒ«ãƒ‹ã‚¢ã®ç ”ç©¶è€…ã«ã‚ˆã‚‹æ©Ÿèƒ½çš„ç£æ°—å…±é³´ç”»åƒæ³•ï¼ˆfMRIï¼‰ã®ç ”ç©¶ã§ã¯ã€é«˜æ•æ„Ÿãªäººã€…ãŒè‡ªå·±è©•ä¾¡ãƒ†ã‚¹ãƒˆã«å›ç­”ã™ã‚‹éš›ã€è„³å†…ã®æœ¬èƒ½çš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é ˜åŸŸãŒæ´»æ€§åŒ–ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚</p>

      <p>ã‚‚ã¡ã‚ã‚“ã€å¾Œå¤©çš„ãªç’°å¢ƒã‚„æ€§æ ¼ã€èªçŸ¥ã‚‚ã‚¹ãƒˆãƒ¬ã‚¹ã¸ã®åå¿œã«å½±éŸ¿ã—ã€æ•æ„Ÿã•ã®ç™ºé”ã«ã‚ã‚‹ç¨‹åº¦å½±éŸ¿ã‚’ä¸ãˆã¾ã™ã€‚ã—ã‹ã—ã€ç¾åœ¨ã®å¤šãã®äººã¯ã€å…ˆå¤©çš„è¦å› ãŒã€Œéå¸¸ã«æ•æ„Ÿãªäººã€…ã€ã«åŠã¼ã™å½±éŸ¿ã‚’éå°è©•ä¾¡ã—ã¦ã„ã¾ã™ã€‚ç”Ÿã¾ã‚Œã¤ãã®ç‰¹æ€§ã¯ç°¡å˜ã«ã¯å¤‰ãˆã‚‰ã‚Œã¾ã›ã‚“ãŒã€è‡ªåˆ†ã®èªçŸ¥ã®ä»•æ–¹ã‚’å¤‰ãˆã‚‹ã“ã¨ã§ã€è€ƒãˆæ–¹ã‚„æ‰ãˆæ–¹ã‚’å°‘ã—ãšã¤å¤‰ãˆã‚‹ã“ã¨ã¯å¯èƒ½ã§ã™ã€‚é«˜æ„Ÿå—æ€§ç—‡çŠ¶ã¯ç—…æ°—ã§ã¯ãªãäººæ ¼ç‰¹æ€§ã®ä¸€ã¤ã§ã‚ã‚Šã€ã©ã®ã‚ˆã†ã«æ‰ãˆã‚‹ã‹ã¯è‡ªåˆ†è‡ªèº«ã®èªçŸ¥ã®ä»•æ–¹ã«ã‚ˆã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€ç´°ã‹ãæ…é‡ãªè‡ªåˆ†ã‚’å¥½ããªäººã‚‚ã„ã‚Œã°ã€è€ƒãˆã™ãã‚‹è‡ªåˆ†ãŒå«Œãªäººã‚‚ã„ã¾ã™ã€‚</p>

      <button class="next-btn" onclick="window.location.href='4.html'">ğŸ‘‰ æ¬¡ã¸</button>
    </div>
  </div>

  <script>
    const notesContainer = document.getElementById("notes");
    const axisArea = document.getElementById("axis-area");

    let draggedNote = null;

    function makeDraggable(note) {
      note.addEventListener("dragstart", dragStart);
    }

    function dragStart(e) {
      draggedNote = e.target;
    }

    function dragOver(e) {
      e.preventDefault();
    }

    function dropNote(e) {
      e.preventDefault();
      if (draggedNote) {
        const rect = axisArea.getBoundingClientRect();
        const x = e.clientX - rect.left - draggedNote.offsetWidth / 2;
        const y = e.clientY - rect.top - draggedNote.offsetHeight / 2;

        if (draggedNote.classList.contains("custom-note")) {
          const input = draggedNote.querySelector("input");
          if (input.value.trim() !== "") {
            const newNote = document.createElement("div");
            newNote.classList.add("note");
            newNote.setAttribute("draggable", "true");
            newNote.textContent = input.value;
            newNote.style.position = "absolute";
            newNote.style.left = `${x}px`;
            newNote.style.top = `${y}px`;

            makeDraggable(newNote);
            axisArea.appendChild(newNote);

            input.value = "";
            notesContainer.appendChild(draggedNote);
          } else {
            notesContainer.appendChild(draggedNote);
          }
        } else {
          draggedNote.style.position = "absolute";
          draggedNote.style.left = `${x}px`;
          draggedNote.style.top = `${y}px`;
          axisArea.appendChild(draggedNote);
        }

        draggedNote = null;
      }
    }

    document.querySelectorAll(".note").forEach(makeDraggable);
    axisArea.addEventListener("dragover", dragOver);
    axisArea.addEventListener("drop", dropNote);

    // å®ŒæˆæŒ‰é’®äº‹ä»¶ï¼šé–‹å•Ÿ overlayï¼ˆå·²å«ç§‘æ™®ï¼‰
    const finishBtn = document.getElementById("finishBtn");
    const overlay = document.getElementById("overlay");

    finishBtn.addEventListener("click", () => {
      overlay.classList.add("active");
      // ã‚«ãƒ¼ãƒ‰ã‚’ä¸­å¤®ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆå¿…è¦ãªã‚‰ï¼‰
      const card = overlay.querySelector(".overlay-content");
      card.scrollIntoView({ behavior: "smooth", block: "center" });
    });
  </script>
</body>
</html>
