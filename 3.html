<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Part3: è‹¦æ‰‹ãªå ´é¢ã®æ•´ç†</title>
  <style>
    body {
      font-family: "Arial", sans-serif;
      background-color: #FBF1F0;
      color: #5C4545;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    h2 {
      text-align: center;
      color: #FA7DAD;
      margin: 20px;
    }

    /* ğŸŒ¸ æ–°å¢ï¼šå¼•å¯¼è¯­æ ·å¼ + åŠ¨ç”» */
    .intro-text {
      text-align: center;
      max-width: 700px;
      margin: 0 auto 10px;
      line-height: 1.8;
      color: #7a5c5c;
      font-size: 1.05em;
      opacity: 0;
      animation: fadeIn 1.8s ease forwards;
      animation-delay: 0.5s;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .container {
      flex: 1;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      padding: 20px;
      height: 70vh;
    }

    .notes {
      width: 30%;
      padding: 10px;
      overflow-y: auto;
    }

    .note {
      background: #ffdee4;
      border: 1px solid #f2a9c2;
      border-radius: 8px;
      padding: 10px;
      margin: 10px 0;
      cursor: grab;
      text-align: center;
      box-shadow: 2px 2px 6px rgba(0,0,0,0.1);
      position: relative;
    }

    .note:active {
      cursor: grabbing;
    }

    .custom-note input {
      width: 90%;
      border: none;
      outline: none;
      background: transparent;
      text-align: center;
      font-size: 14px;
      color: #5C4545;
    }

    .axis-area {
      width: 65%;
      position: relative;
      border: 2px solid #FA7DAD;
      border-radius: 12px;
      background: #fff;
      overflow: hidden;
    }

    .axis-line-x, .axis-line-y {
      position: absolute;
      background: #FA7DAD;
    }

    .axis-line-x {
      top: 50%;
      left: 0;
      height: 2px;
      width: 100%;
    }

    .axis-line-y {
      left: 50%;
      top: 0;
      width: 2px;
      height: 100%;
    }

    .axis-label {
      position: absolute;
      font-size: 16px;
      font-weight: bold;
      color: #FA7DAD;
      background: #FBF1F0;
      padding: 2px 6px;
      border-radius: 6px;
    }

    .label-top { top: 5px; left: 50%; transform: translateX(-50%); }
    .label-bottom { bottom: 5px; left: 50%; transform: translateX(-50%); }
    .label-left { left: 5px; top: 50%; transform: translateY(-50%); }
    .label-right { right: 5px; top: 50%; transform: translateY(-50%); }

    .finish-btn {
      margin: 20px auto;
      background: #FA7DAD;
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 16px;
      border-radius: 24px;
      cursor: pointer;
      transition: 0.3s;
      display: block;
    }

    .finish-btn:hover {
      background: #f95d9f;
    }

    .overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(251, 241, 240, 0.95);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.6s ease;
      z-index: 10;
    }

    .overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .overlay-content {
      background: #fff;
      padding: 30px;
      border-radius: 16px;
      max-width: 800px;
      text-align: left;
      box-shadow: 0px 4px 10px rgba(0,0,0,0.15);
      line-height: 1.7;
      color: #5C4545;
    }

    .overlay-content h3 {
      color: #FA7DAD;
      margin-bottom: 15px;
      text-align: center;
    }

    .overlay-content p {
      margin-bottom: 12px;
    }

    .next-btn {
      margin-top: 20px;
      background: #FA7DAD;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 14px;
      border-radius: 20px;
      cursor: pointer;
      transition: 0.3s;
      display: block;
    }

    .next-btn:hover {
      background: #f95d9f;
    }

    @media (max-width: 768px) {
      .container {
        flex-direction: column;
        align-items: center;
        height: auto;
      }
      .notes, .axis-area {
        width: 100%;
        margin-bottom: 15px;
      }
      .axis-area {
        height: 60vh;
      }
      .overlay-content { max-width: 92%; padding: 18px; }
    }
  </style>
</head>
<body>
  <h2>ğŸŒ¸ è‹¦æ‰‹ãªå ´é¢ã‚’æ•´ç†ã—ã¦ã¿ã‚ˆã† ğŸŒ¸</h2>

  <!-- ğŸŒ· æ–°å¢å¼•å¯¼è¯­ -->
  <p class="intro-text">
    ã‚ãªãŸã¯ä»Šã¾ã§ã«ã€æ¬¡ã®ã‚ˆã†ãªã€Œè‹¦æ‰‹ã ãªã€ã¨æ„Ÿã˜ãŸå ´é¢ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ<br>
    ä¸‹ã®ãƒ¡ãƒ¢ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦ã€å››è±¡é™ã®ä¸­ã«ç½®ã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚<br>
    ã©ã‚“ãªå ´é¢ã§ã©ã‚“ãªè‹¦æ‰‹ã•ã‚’æ„Ÿã˜ã‚‹ã®ã‹ã€è‡ªåˆ†ã§æ•´ç†ã—ã¦ã¿ã‚‹æ™‚é–“ã§ã™ã€‚<br>
    ã‚‚ã¡ã‚ã‚“ã€è‡ªåˆ†ã®å ´é¢ã‚’è‡ªç”±ã«è¿½åŠ ã—ã¦ã‚‚OKã§ã™ğŸŒ·
  </p>

  <div class="container">
    <div class="notes" id="notes">
      <div class="note" draggable="true">1. å¤§å‹¢ã®å‰ã§ç™ºè¡¨ã™ã‚‹</div>
      <div class="note" draggable="true">2. è¦‹ã‚‰ã‚Œã¦ã„ã‚‹çŠ¶æ³ã§ä½œæ¥­ã™ã‚‹</div>
      <div class="note" draggable="true">3. çŸ¥ã‚‰ãªã„äººã¨é•·æ™‚é–“ä¸€ç·’ã«ã„ã‚‹</div>
      <div class="note" draggable="true">4. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¿”ã£ã¦ã“ãªã„</div>
      <div class="note" draggable="true">5. é¨’éŸ³ã®ä¸­ã§ä¼‘ã‚€</div>
      <div class="note" draggable="true">6. åˆºæ¿€çš„ãªæ˜ åƒã‚’è¦‹ã‚‹</div>
      <div class="note custom-note" draggable="true">
        <input type="text" placeholder="â• ã‚ãªãŸè‡ªèº«ã®å ´é¢ã‚’è¿½åŠ " />
      </div>
    </div>

    <div class="axis-area" id="axis-area">
      <div class="axis-line-x"></div>
      <div class="axis-line-y"></div>
      <div class="axis-label label-top">å¿ƒç†</div>
      <div class="axis-label label-bottom">ç”Ÿç†</div>
      <div class="axis-label label-left">å†…å› </div>
      <div class="axis-label label-right">å¤–å› </div>
    </div>
  </div>

  <button class="finish-btn" id="finishBtn">å®Œæˆ âœ¨</button>

  <div class="overlay" id="overlay">
    <div class="overlay-content">
      <h3>ğŸŒ± é«˜æ„Ÿå—æ€§ç—‡çŠ¶ã¯ãªãœç”Ÿã˜ã‚‹ã®ã‹ï¼Ÿ</h3>
      <p><strong>ç”Ÿç†çš„è¦å› ãŒä¸€éƒ¨ã®äººã‚’æ•æ„Ÿã«ã™ã‚‹</strong><br>
      ç¾åœ¨ã®ä¸–ç•Œã«ãŠã‘ã‚‹ã€Œæ•æ„Ÿã•ã€ã«é–¢ã™ã‚‹ç ”ç©¶ã§ã¯ã€ãã‚Œã¯ç”Ÿã¾ã‚Œã¤ãã®äººæ ¼ç‰¹æ€§ã§ã‚ã‚Šã€ä¸»ã«ç”Ÿç†çš„è¦å› ã«ã‚ˆã£ã¦å½¢æˆã•ã‚Œã‚‹ã“ã¨ãŒåˆ†ã‹ã£ã¦ã„ã¾ã™ã€‚</p>

      <p><strong>éºä¼å­ãŒäººã®æ•æ„Ÿã•ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹</strong><br>
      ã€Œé«˜åº¦ã«æ•æ„Ÿãªäººã€…ã€ã«é–¢ã™ã‚‹æ•°ç™¾ã®ç ”ç©¶ã§ã€éºä¼å­ãŒé‡è¦ãªè¦å› ã§ã‚ã‚‹ã“ã¨ãŒç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚ç ”ç©¶è€…ãŸã¡ã¯ã€ã‚»ãƒ­ãƒˆãƒ‹ãƒ³ãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ã‚¿ãƒ¼éºä¼å­ï¼ˆ5-HTTï¼‰ãŒã€æ•æ„Ÿã•ã‚„æ„Ÿæƒ…ã®å¥åº·ã«å¤§ããªå½±éŸ¿ã‚’ä¸ãˆã‚‹ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</p>

      <p><strong>è„³ã®ä¸€éƒ¨ã®æ´»å‹•ãŒæ•æ„Ÿã•ã¨é–¢ä¿‚ã™ã‚‹</strong><br>
      ã‚«ãƒªãƒ•ã‚©ãƒ«ãƒ‹ã‚¢ã®ç ”ç©¶è€…ã«ã‚ˆã‚‹fMRIã®ç ”ç©¶ã§ã¯ã€é«˜æ•æ„Ÿãªäººã€…ãŒè‡ªå·±è©•ä¾¡ãƒ†ã‚¹ãƒˆã«å›ç­”ã™ã‚‹éš›ã€è„³å†…ã®æœ¬èƒ½çš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é ˜åŸŸãŒæ´»æ€§åŒ–ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚</p>

      <p>ã‚‚ã¡ã‚ã‚“ã€å¾Œå¤©çš„ãªç’°å¢ƒã‚„æ€§æ ¼ã€èªçŸ¥ã‚‚ã‚¹ãƒˆãƒ¬ã‚¹ã¸ã®åå¿œã«å½±éŸ¿ã—ã¾ã™ãŒã€æ•æ„Ÿã•ã¯å…ˆå¤©çš„ãªç‰¹æ€§ã®ä¸€ã¤ã§ã™ã€‚ç”Ÿã¾ã‚ŒæŒã£ãŸç‰¹è³ªã‚’ç†è§£ã—ã€è‡ªåˆ†ãªã‚Šã®è¦‹æ–¹ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ã§ã€å°‘ã—ãšã¤è‡ªåˆ†ã¨ã®ä»˜ãåˆã„æ–¹ã‚’å¤‰ãˆã¦ã„ã‘ã¾ã™ã€‚</p>

      <button class="next-btn" onclick="window.location.href='4.html'">ğŸ‘‰ æ¬¡ã¸</button>
    </div>
  </div>

  <script>
    const notesContainer = document.getElementById("notes");
    const axisArea = document.getElementById("axis-area");
    let draggedNote = null;

    function makeDraggable(note) {
      note.addEventListener("dragstart", dragStart);
    }

    function dragStart(e) {
      draggedNote = e.target;
    }

    function dragOver(e) { e.preventDefault(); }

    function dropNote(e) {
      e.preventDefault();
      if (draggedNote) {
        const rect = axisArea.getBoundingClientRect();
        const x = e.clientX - rect.left - draggedNote.offsetWidth / 2;
        const y = e.clientY - rect.top - draggedNote.offsetHeight / 2;

        if (draggedNote.classList.contains("custom-note")) {
          const input = draggedNote.querySelector("input");
          if (input.value.trim() !== "") {
            const newNote = document.createElement("div");
            newNote.classList.add("note");
            newNote.setAttribute("draggable", "true");
            newNote.textContent = input.value;
            newNote.style.position = "absolute";
            newNote.style.left = `${x}px`;
            newNote.style.top = `${y}px`;
            makeDraggable(newNote);
            axisArea.appendChild(newNote);
            input.value = "";
            notesContainer.appendChild(draggedNote);
          }
        } else {
          draggedNote.style.position = "absolute";
          draggedNote.style.left = `${x}px`;
          draggedNote.style.top = `${y}px`;
          axisArea.appendChild(draggedNote);
        }
        draggedNote = null;
      }
    }

    document.querySelectorAll(".note").forEach(makeDraggable);
    axisArea.addEventListener("dragover", dragOver);
    axisArea.addEventListener("drop", dropNote);

    const finishBtn = document.getElementById("finishBtn");
    const overlay = document.getElementById("overlay");

    finishBtn.addEventListener("click", () => {
      overlay.classList.add("active");
      const card = overlay.querySelector(".overlay-content");
      card.scrollIntoView({ behavior: "smooth", block: "center" });
    });
  </script>
</body>
</html>
