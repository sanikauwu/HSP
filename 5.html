<!DOCTYPE html>
<html lang="ja">
<head>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <script src="firebase-init.js"></script>
  <script src="comment.js"></script>
  
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>P5ï½œã‚»ãƒ«ãƒ•ã‚±ã‚¢ãƒ—ãƒ©ãƒ³</title>

<style>
  /* ===== è¯„è®ºæ•´ä½“å®¹å™¨ï¼ˆä¸å— body flex å½±å“ï¼‰ ===== */
#commentWrapper {
  width: 100%;
  max-width: 700px;
  margin: 60px auto 80px;
  padding: 0 16px;
  box-sizing: border-box;

  /* ğŸ”¥ é˜²æ­¢è¢« flex å¸ƒå±€å¸¦æ­ª */
  align-self: stretch;
  text-align: left;
}

/* ===== è¾“å…¥åŒºåŸŸï¼ˆé€æ˜èƒŒæ™¯ï¼‰ ===== */
#commentInputArea {
  margin-bottom: 20px;
}

#commentInputArea h3 {
  margin-bottom: 10px;
  color: #FA7DAD;
}

#commentInput {
  width: 100%;
  height: 80px;
  padding: 10px;
  border-radius: 10px;
  border: 1px solid #E5C8C5;
  resize: none;
  outline: none;
  font-family: inherit;
}

#sendCommentBtn {
  margin-top: 10px;
  padding: 8px 18px;
  border-radius: 20px;
  border: none;
  background: #FA7DAD;
  color: white;
  cursor: pointer;
}

/* ===== è¯„è®ºåˆ—è¡¨ï¼ˆç™½è‰²èƒŒæ™¯ï¼‰ ===== */
#commentList {
  background: rgba(255,255,255,0.85);
  border-radius: 16px;
  padding: 16px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.08);
}

/* å•æ¡è¯„è®º */
.commentItem {
  padding: 10px 0;
  border-bottom: 1px dashed #F2C6D6;
}

.commentItem:last-child {
  border-bottom: none;
}

.commentUser {
  font-weight: bold;
  color: #FA7DAD;
  margin-bottom: 4px;
}

.commentText {
  color: #5C4545;
  line-height: 1.5;
}

  body {
    font-family: "Noto Sans JP", sans-serif;
    background-color: #FBF1F0;
    color: #333;
    text-align: center;
    margin: 0;
    padding: 0;
    animation: fadeIn 1.2s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(15px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .fade-section {
    animation: fadeIn 1s ease;
  }

  .container {
    max-width: 900px;
    margin: 80px auto;
    padding: 30px;
    background: white;
    border-radius: 25px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    transition: opacity 0.6s ease;
  }

  h1 {
    font-size: 1.8em;
    color: #5b524a;
    margin-bottom: 20px;
  }

  p {
    font-size: 1em;
    line-height: 1.8;
    color: #5b524a;
  }

  .button {
      margin: 20px auto;
      background: #FA7DAD;
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 16px;
      border-radius: 24px;
      cursor: pointer;
      transition: 0.3s;
      display: block;
  }

  .button:hover {
    background: #f95d9f;
  }

  .guide-section {
    text-align: left;
    margin-bottom: 40px;
  }

  .guide-section h2 {
    font-size: 1.2em;
    color: #6b5948;
    border-left: 4px solid #FA7DAD;
    padding-left: 10px;
    margin-top: 25px;
  }

  .memo-container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
  }

  .memo-card {
    width: 200px;
    height: 200px;
    background: #fff8e7;
    border: 1px solid #f0d9b5;
    border-radius: 15px;
    padding: 15px;
    position: relative;
    display: flex;
    flex-direction: column;
    transition: 0.3s;
    animation: fadeIn 0.8s ease;
  }

  .memo-title {
    font-weight: bold;
    color: #6b5948;
    font-size: 0.95em;
    margin-bottom: 5px;
    text-align: left;
  }

  .memo-text {
    flex-grow: 1;
    border: none;
    background: transparent;
    resize: none;
    font-size: 0.9em;
    outline: none;
  }

  .deleteBtn {
    position: absolute;
    top: 8px;
    right: 10px;
    border: none;
    background: none;
    font-size: 1.2em;
    cursor: pointer;
    color: #b08b5a;
  }

  #addBtn {
    font-size: 1.2em;
    background: #ffe4c4;
    border: none;
    border-radius: 50%;
    width: 45px;
    height: 45px;
    cursor: pointer;
    margin-top: 20px;
    transition: 0.3s;
  }

  #addBtn:hover {
    transform: rotate(90deg);
  }

  #submitBtn {
    background: #FA7DAD;
    color: #fff;
    border: none;
    border-radius: 25px;
    padding: 12px 30px;
    font-size: 1em;
    cursor: pointer;
    margin-top: 30px;
    transition: 0.3s;
  }

  #resultSection {
    display: none;
    margin-top: 40px;
    padding: 25px;
    border-radius: 15px;
    background: #fff7f3;
    border: 1px solid #fbc6c6;
    animation: fadeIn 1s ease;
  }

  #resultList {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
  }

  .next-btn {
    margin-top: 40px;
    background: #FA7DAD;
    color: white;
    border: none;
    border-radius: 25px;
    padding: 12px 30px;
    font-size: 1em;
    cursor: pointer;
    transition: 0.3s;
  }

  .hidden {
    display: none;
  }

  /* --- å‚è€ƒä¾‹å¼¹çª— --- */
  #referencePopup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.95);
    background: #fff0f5;
    border: 2px solid #f9b8d2;
    border-radius: 20px;
    padding: 25px;
    width: 300px;
    text-align: left;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    display: none;
    animation: fadeIn 0.5s ease forwards;
    z-index: 100;
  }

  #referencePopup h4 {
    margin-top: 0;
    color: #c45a80;
  }

  #closeRef {
    position: absolute;
    top: 8px;
    right: 12px;
    border: none;
    background: none;
    font-size: 1.2em;
    cursor: pointer;
    color: #c45a80;
  }

  #refBtn {
    margin-top: 25px;
    background: #ffd9e3;
    color: #6b5948;
    border: none;
    border-radius: 20px;
    padding: 10px 22px;
    font-size: 0.95em;
    cursor: pointer;
    transition: 0.3s;
  }

  #refBtn:hover {
    background: #ffc5d4;
  }
</style>
</head>

<body>
<!-- PAGE1 -->
<div class="container" id="page1">
  <div class="expert-content fade-section">
    <h3>å¿ƒç†å­¦è€…ãŒãŠã™ã™ã‚ã™ã‚‹ã‚»ãƒ«ãƒ•ã‚±ã‚¢ã®æ–¹æ³•</h3>
    <p><b>å¿ƒç†å£«ã¯ã€Œ2ã¤ã®ãƒ¬ãƒ™ãƒ«ã®å¢ƒç•Œç·šã€ã‚’è¨­ã‘ã‚‹ã“ã¨ãŒé‡è¦ã ã¨å¼·èª¿ã—ã¦ã„ã¾ã™ã€‚</b></p>
    <p><b>ç‰©ç†çš„ãªå¢ƒç•Œç·š</b><br>é¨’éŸ³ã‚„å¼·ã„æ—¥å·®ã—ãªã©ã®å¤–éƒ¨ã‹ã‚‰ã®åˆºæ¿€ã¯ã€ã€Œãƒã‚¤ã‚ºã‚­ãƒ£ãƒ³ã‚»ãƒªãƒ³ã‚°ã‚¤ãƒ¤ãƒ›ãƒ³ã€ã§é®æ–­ã—ãŸã‚Šã€ã‚«ãƒ¼ãƒ†ãƒ³ã‚’é–‰ã‚ã‚‹ãªã©ã®ç°¡å˜ãªè¡Œå‹•ã§æ„Ÿè¦šã®éæ•åå¿œã‚’å’Œã‚‰ã’ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
    <p><b>å¿ƒç†çš„ãªå¢ƒç•Œç·š</b><br>HSPã¯ä»–äººã®æ„Ÿæƒ…ã«å·»ãè¾¼ã¾ã‚Œã‚„ã™ã„ãŸã‚ã€ã€Œè‡ªåˆ†ã®æ„Ÿæƒ…ã€ã¨ã€Œä»–äººã®æ„Ÿæƒ…ã€ã‚’åŒºåˆ¥ã™ã‚‹ç·´ç¿’ã‚’ã™ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚</p>
    <p>è‡ªåˆ†ã«åˆã£ãŸã‚»ãƒ«ãƒ•ã‚±ã‚¢ã®æ–¹æ³•ã‚’ãƒ‡ã‚¶ã‚¤ãƒ³ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
    <button class="button" onclick="showPage2()">ç†è§£ã—ã¾ã—ãŸ</button>
  </div>
</div>

<!-- PAGE2 -->
<div class="container hidden" id="page2">
  <div class="fade-section">
    <h1>ğŸŒ· è‡ªåˆ†ã‚’ç™’ã‚„ã™ã‚»ãƒ«ãƒ•ã‚±ã‚¢ãƒ—ãƒ©ãƒ³</h1>
    <div class="guide-section">
      <p>è‡ªåˆ†ã®å¿ƒã¨ä½“ã‚’ã‚„ã•ã—ãæ•´ãˆã‚‹ã‚¹ãƒ†ãƒƒãƒ—ã‚’è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
      <h2>â‘  è¿‘ãã®ã‚¢ãƒ³ã‚«ãƒ¼ã‚’ä½œã‚‹</h2>
      <p>æ·±å‘¼å¸ã€çª“ã®å¤–ã‚’è¦‹ã‚‹ã€æ‰‹ã‚’æ¸©ã‚ã‚‹ãªã©ã€‚</p>
      <h2>â‘¡ ä¸€ç•ªãƒªãƒ©ãƒƒã‚¯ã‚¹ã§ãã‚‹è¶£å‘³</h2>
      <p>éŸ³æ¥½ãƒ»çµµãƒ»æ•£æ­©ãªã©ã€‚</p>
      <h2>â‘¢ è‡ªåˆ†ã®é•·æ‰€</h2>
      <p>å¾—æ„ãªã“ã¨ã€å°ã•ãªæˆåŠŸã‚’æ€ã„å‡ºã—ã¾ã—ã‚‡ã†ã€‚</p>
      <h2>â‘£ ç¾å®Ÿã‚’è€ƒãˆãªã„å¤¢</h2>
      <p>ã€Œã„ã¤ã‹ã“ã‚“ãªã“ã¨ã‚’ã—ãŸã„ã€ã¨æã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
    </div>
    <button class="button" onclick="showPage3()">æ¬¡ã¸</button>
  </div>
</div>

<!-- PAGE3 -->
<div class="container hidden" id="page3">
  <div class="fade-section">
    <h2>ğŸ“ è‡ªåˆ†ã ã‘ã®ã‚»ãƒ«ãƒ•ã‚±ã‚¢ãƒªã‚¹ãƒˆ</h2>
    <div id="memoContainer" class="memo-container">
      <div class="memo-card">
        <div class="memo-title">â‘  è¿‘ãã®ã‚¢ãƒ³ã‚«ãƒ¼</div>
        <textarea class="memo-text"></textarea>
        <button class="deleteBtn">ğŸ—‘</button>
      </div>
      <div class="memo-card">
        <div class="memo-title">â‘¡ ãƒªãƒ©ãƒƒã‚¯ã‚¹ã§ãã‚‹è¶£å‘³</div>
        <textarea class="memo-text"></textarea>
        <button class="deleteBtn">ğŸ—‘</button>
      </div>
      <div class="memo-card">
        <div class="memo-title">â‘¢ è‡ªåˆ†ã®é•·æ‰€</div>
        <textarea class="memo-text"></textarea>
        <button class="deleteBtn">ğŸ—‘</button>
      </div>
      <div class="memo-card">
        <div class="memo-title">â‘£ ç¾å®Ÿã‚’è€ƒãˆãªã„å¤¢</div>
        <textarea class="memo-text"></textarea>
        <button class="deleteBtn">ğŸ—‘</button>
      </div>
    </div>

    <button id="addBtn">ï¼‹</button><br>
    <button id="refBtn">ğŸ’¡å‚è€ƒä¾‹ã‚’è¦‹ã‚‹</button><br>
    <button id="submitBtn">æå‡ºã™ã‚‹</button>

    <div id="resultSection">
      <h3>ğŸƒ ã‚ãªãŸã®ã‚»ãƒ«ãƒ•ã‚±ã‚¢ãƒªã‚¹ãƒˆ</h3>
      <div id="resultList"></div>
    </div>
    <button class="next-btn" onclick="goNext()">æ¬¡ã®ãƒšãƒ¼ã‚¸ â¡ï¸</button>
  </div>
</div>

<!-- å‚è€ƒä¾‹å¼¹çª— -->
<div id="referencePopup">
  <button id="closeRef">âŒ</button>
  <h4>ğŸŒ· å‚è€ƒä¾‹</h4>
  <p>ãƒ»æ·±å‘¼å¸ã‚’3å›ã—ã¦ã‹ã‚‰å¯ã‚‹<br>
  ãƒ»1æ—¥ã®çµ‚ã‚ã‚Šã«æ„Ÿè¬ã‚’3ã¤æ›¸ã<br>
  ãƒ»å¥½ããªéŸ³æ¥½ã‚’è´ã<br>
  ãƒ»è‡ªç„¶ã®ä¸­ã‚’5åˆ†æ•£æ­©ã™ã‚‹</p>
</div>

<script>
function showPage2() {
  document.getElementById("page1").classList.add("hidden");
  const p2 = document.getElementById("page2");
  p2.classList.remove("hidden");
  p2.classList.add("fade-section");
}

function showPage3() {
  document.getElementById("page2").classList.add("hidden");
  const p3 = document.getElementById("page3");
  p3.classList.remove("hidden");
  p3.classList.add("fade-section");
}

// ä¾¿ç­¾é€»è¾‘
const addBtn = document.getElementById("addBtn");
const memoContainer = document.getElementById("memoContainer");
const submitBtn = document.getElementById("submitBtn");
const resultSection = document.getElementById("resultSection");
const resultList = document.getElementById("resultList");

addBtn.addEventListener("click", () => {
  const newMemo = document.createElement("div");
  newMemo.className = "memo-card";
  newMemo.innerHTML = `
    <div class="memo-title">æ–°ã—ã„ã‚»ãƒ«ãƒ•ã‚±ã‚¢</div>
    <textarea class="memo-text"></textarea>
    <button class="deleteBtn">ğŸ—‘</button>`;
  newMemo.querySelector(".deleteBtn").addEventListener("click", () => newMemo.remove());
  memoContainer.appendChild(newMemo);
});

submitBtn.addEventListener("click", () => {
  const memos = document.querySelectorAll(".memo-card");
  const filled = Array.from(memos)
    .map(m => {
      const title = m.querySelector(".memo-title").textContent;
      const text = m.querySelector(".memo-text").value.trim();
      return text ? { title, text } : null;
    })
    .filter(v => v !== null);

  if (filled.length === 0) {
    alert("å°‘ãªãã¨ã‚‚1ã¤ã¯æ›¸ã„ã¦ã¿ã¾ã—ã‚‡ã†ğŸŒ¸");
    return;
  }

  resultList.innerHTML = "";
  filled.forEach(({title, text}) => {
    const item = document.createElement("div");
    item.style.cssText = "width:200px;height:200px;background:#ffece1;border:1px solid #f4c5a6;border-radius:15px;padding:15px;white-space:pre-wrap;font-size:0.9em;color:#6b5948;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;";
    item.innerHTML = `<strong>${title}</strong><br>${text}`;
    resultList.appendChild(item);
  });
  resultSection.style.display = "block";
});

// å‚è€ƒä¾‹å¼¹çª—æ§åˆ¶
document.getElementById("refBtn").addEventListener("click", () => {
  document.getElementById("referencePopup").style.display = "block";
});
document.getElementById("closeRef").addEventListener("click", () => {
  document.getElementById("referencePopup").style.display = "none";
});

function goNext() {
  window.location.href = "6.html";
}
</script>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script src="firebase-init.js"></script>

<!-- ä½ çš„å…¨ç«™é€šç”¨è¯„è®ºç³»ç»Ÿ -->
<script src="comment.js"></script>

</body>
</html>
